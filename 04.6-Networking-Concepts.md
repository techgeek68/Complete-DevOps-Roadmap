# 9. Configuring Network

A reference for DevOps engineers on Linux networking, including interface setup, IP addressing, DNS, routing, troubleshooting, firewall integration, cloud networking (AWS, Azure, GCP), automation, and best practices. All commands are grouped by tool, including verification steps, explanations, and cloud scenarios.

---

**9.1 Networking Concepts**

**Network Communication Types**

**1. Unicast (One-to-One)**
 - Definition: One source → One destination
 - Use: Web browsing, SSH, email
 - Example: `192.168.1.10 → 192.168.1.20`

**2. Broadcast (One-to-All)**
 - Definition: One source → All devices in networks
 - Use: ARP, DHCP
 - Example: `192.168.1.10 → 255.255.255.255`

**3. Multicast (One-to-Many)**
 - Definition: One source → Multiple specific devices
 - Use: Video streaming, conferencing
 - IP Range: 224.0.0.0 – 239.255.255.255
 - Example: `192.168.1.10 → 239.255.0.1`

**4. Anycast (One-to-Nearest)**
 - Definition: One source → Nearest of multiple identical destinations
 - Use: DNS servers, CDNs

---

**IP Address**
A unique numerical label assigned to every device on an IP network for identification and routing.

**Types:**
- **IPv4 (Internet Protocol Version 4):**
    - Format: 32-bit, dotted decimal notation
    - Example: `192.168.1.1`
    - Limitation: ~4.3 billion addresses (exhausted)
    
- **IPv6(Internet Protocol Version 6):**
    - Format: 128-bit, hexadecimal notation
    - Example:`2001:0db8:85a3::8a2e:0370:7334`
    - Virtually unlimited addresses

**IP Address Functions:**
- Host Identification: Uniquely identifies each device
- Interface Addressing: Identifies specific network interfaces
- Routing: Enables packet delivery to the correct destinations

**IP Address Categories:**
- Public IP Address:
  - Globally routable on the Internet
  - Allocated by IANA → Regional Internet Registries (RIRs) → ISPs
  - Required for direct Internet access
    
- Private IP Address(RFC 1918)
  - Used within local networks only
  - Not routable on the public Internet
  - Requires NAT (Network Address Translation) for Internet access
    
**- Examples:**
```
10.0.0.0/8        (10.0.0.0 - 10.255.255.255)     - Large organizations
172.16.0.0/12     (172.16.0.0 - 172.31.255.255)   - Medium organizations  
192.168.0.0/16    (192.168.0.0 - 192.168.255.255) - Home/small business
```

<img width="919" height="58" alt="Screenshot 2025-10-28 at 8 19 54 AM" src="https://github.com/user-attachments/assets/fc3d9426-8154-4f33-b20f-a4fe844cca79" />


**Default Gateway**
A router that sends data between different networks, such as from a local network (LAN) to the Internet. It often uses NAT to convert private IP addresses to public ones.

**Functions:**
  - Routes traffic from the local network to external networks (LAN → Internet)
  - Typically performs NAT (Network Address Translation)
  - Serves as the "exit point" from the local network

**Example:**
  - Local device: 192.168.1.100
  - Gateway: 192.168.1.1
  - Internet destination: routed through the gateway

<img width="886" height="202" alt="Screenshot 2025-10-28 at 8 24 17 AM" src="https://github.com/user-attachments/assets/9cdb072c-cd1d-47aa-9dc2-f380c1f823dc" />


**DNS (Domain Name System)**
It’s what helps your computer find websites by turning names like example.com into the numerical addresses computers use to connect, kind of like looking up a contact’s phone number to make a call.

**DNS Components:**
 - Recursive resolver:
     - First point of contact for DNS queries
     - Caches responses for performance
     - Examples:
         - 8.8.8.8 (Google)
         - 1.1.1.1 (Cloudflare)
           
 - Authoritative nameserver:
     - Holds the official DNS records for domains
     - Provides definitive answers for specific domains
     - Managed by domain owners/hosting providers
 
 - DNS Resolution Process:
`Query recursive resolver → 2. Check cache → 3. Query root servers → 4. Query TLD servers → 5. Query authoritative servers → 6. Return IP address`

<img width="778" height="149" alt="Screenshot 2025-10-28 at 8 25 59 AM" src="https://github.com/user-attachments/assets/732c4d65-2791-4bde-b9ca-83d9e7833d66" />

---

## 9.2 IPv4 Classful Addressing & Special Ranges

While modern networks use CIDR (Classless Inter-Domain Routing), understanding historical classful addressing helps interpret legacy systems and documentation.

**Unicast Address Classes (A, B, C):**
These were used for assigning addresses to hosts on the public internet and have corresponding private address blocks defined in RFC 1918.

| **Class** | **First Octet** | **Historical Public Range** | **Private Range (RFC 1918)**  | **Default Mask** | **CIDR** |
| :-------: | :-------------: | :-------------------------: | :--------------------------:  | :--------------: | :------: |
|   **A**   |      1–126      |  1.0.0.0 – 126.255.255.255  |  10.0.0.0 – 10.255.255.255    |    255.0.0.0     |   /8     |
|   **B**   |     128–191     | 128.0.0.0 – 191.255.255.255 | 172.16.0.0 – 172.31.255.255   |   255.255.0.0    |   /16    |
|   **C**   |     192–223     | 192.0.0.0 – 223.255.255.255 | 192.168.0.0 – 192.168.255.255 |  255.255.255.0   |   /24    |

**Special Use Address Classes (D, E) & Notable Reservations**:
These address ranges are reserved for specific protocols and are not used for general host addressing.
| **Class** | **First Octet** | **Address Range** | **Purpose** | **Examples** |
| :-------: | :-------------: | :---------------: | :---------: | :--------------- |
|   **D**   |     224–239     | 224.0.0.0 – 239.255.255.255 | **Multicast** | 224.0.0.1 (All hosts), 224.0.0.2 (All routers) |
|   **E**   |     240–255     | 240.0.0.0 – 255.255.255.255 | **Reserved / Experimental** | 255.255.255.255 (Limited broadcast) |
|  **N/A**  |      **127**    |   127.0.0.0/8     | **Loopback** | 127.0.0.1 (Localhost) |
|  **N/A**  |     **169.254** |   169.254.0.0/16  | **APIPA** | 169.254.x.x (Automatic Private IP Addressing) |
|  **N/A**  |    **192.0.2**  |   192.0.2.0/24    | **TEST-NET** | 192.0.2.1 (Documentation & examples) |

Other reserved ranges:
- 198.51.100.0/24, 203.0.113.0/24 (documentation)
- 100.64.0.0/10 (Carrier Grade NAT)
- 255.255.255.255 (Local broadcast)

---

## 9.3 Linux Networking Commands

**Interface Configuration**

| Purpose | Command | Description |
|---------|---------|-------------|
| **Show all IP addresses** | `hostname -I` | Linux-specific, shows all IPs |
| **Legacy interface info** | `ifconfig` | Deprecated (net-tools package) |
| **Modern interface info** | `ip addr show`<br>`ip a` (shorthand) | Preferred modern method |
| **Interface status** | `ip link show` | Shows link layer status |
| **Bring interface up/down** | `ip link set eth0 up`<br>`ip link set eth0 down` | Replace `eth0` with interface name |
| **Add IP address** | `ip addr add 192.168.1.100/24 dev eth0` | Temporary (lost on reboot) |
| **Remove IP address** | `ip addr del 192.168.1.100/24 dev eth0` | Remove specific IP |
| **Flush all IPs** | `ip addr flush dev eth0` | Remove all IPs from interface |



**Routing & Gateway**

| Purpose | Command | Description |
|---------|---------|-------------|
| **Show routing table** | `ip route show`<br>`ip route` | Modern replacement |
| **Legacy routing table** | `route -n` | Deprecated |
| **Add default gateway** | `ip route add default via 192.168.1.1` | Set default route |
| **Add specific route** | `ip route add 10.0.0.0/8 via 192.168.1.1` | Add network route |
| **Delete route** | `ip route del 10.0.0.0/8` | Remove specific route |
| **Flush routing table** | `ip route flush all` | Clear all routes |



**DNS & Name Resolution**

| Purpose | Command | Description |
|---------|---------|-------------|
| **Show DNS servers** | `cat /etc/resolv.conf` | May be managed by NetworkManager |
| **Test DNS resolution** | `dig example.com A`<br>`dig +short example.com` | Detailed/short output |
| **Simple DNS lookup** | `nslookup example.com` | Legacy but simple |
| **Host lookup** | `host example.com` | Basic DNS query |
| **Flush DNS cache (systemd)** | `systemd-resolve --flush-caches` | systemd-resolved |
| **Flush DNS cache (NetworkManager)** | `sudo systemctl restart NetworkManager` | Alternative method |


**Network Connectivity Testing**

| Purpose | Command | Description |
|---------|---------|-------------|
| **Test reachability** | `ping 8.8.8.8`<br>`ping -c 4 8.8.8.8` | Continuous/limited pings |
| **Trace path** | `traceroute example.com` | Requires root privileges |
| **Rootless trace** | `tracepath example.com` | No root required |
| **HTTP test** | `curl -I http://example.com` | Headers only |
| **Verbose HTTP** | `curl -v http://example.com` | Detailed connection info |
| **Download test** | `wget http://example.com/file` | Download file |


**Network Statistics & Monitoring**

| Purpose | Command | Description |
|---------|---------|-------------|
| **Legacy listening ports** | `netstat -tulnp` | net-tools package |
| **Modern listening ports** | `ss -tulnp` | Faster, iproute2 package |
| **All connections** | `ss -tunap` | All TCP/UDP connections |
| **Interface statistics** | `ip -s link` | Show interface statistics |
| **Network statistics** | `netstat -i` | Interface table |
| **ARP table** | `ip neigh show` | Modern ARP table |
| **Legacy ARP** | `arp -n` | Deprecated ARP table |


**Troubleshooting & Advanced**

| Purpose | Command | Description |
|---------|---------|-------------|
| **Check network manager** | `nmcli device status` | NetworkManager status |
| **Restart networking** | `systemctl restart NetworkManager` | Redhat/Fedora/CentOS |
| **Restart networking** | `systemctl restart networking` | Debian/Ubuntu (ifupdown) |
| **Scan ports** | `nmap -sS 192.168.1.0/24` | Network discovery |
| **Check bandwidth** | `iftop` | Real-time bandwidth (install separately) |
| **Monitor traffic** | `tcpdump -i eth0` | Packet capture |
| **Follow system logs** | `journalctl -f -u NetworkManager` | NetworkManager logs |


**Configuration Files**

| File | Purpose |
|------|---------|
| `/etc/netplan/` | Ubuntu network configuration (YAML) |
| `/etc/network/interfaces` | Debian interface configuration |
| `/etc/sysconfig/network-scripts/` | RedHat/CentOS interface configs |
| `/etc/resolv.conf` | DNS resolver configuration |
| `/etc/hosts` | Local hostname to IP mappings |


**Examples: Essential Commands**

**System overview:**
```bash
ip a                        # Show IP addresses
```
<img width="880" height="249" alt="Screenshot 2025-10-28 at 8 59 18 AM" src="https://github.com/user-attachments/assets/f21d086d-53c7-4ffa-bee5-0a7f0b790116" />

```bash
ip route                    # Show routing table
```

```bash
ss -tulnp                   # Show listening ports
```

<img width="852" height="199" alt="Screenshot 2025-10-28 at 9 01 26 AM" src="https://github.com/user-attachments/assets/0c9b0e56-61d5-4664-bc76-d52f9f2b12ea" />


**Connectivity testing**
```
ping 8.8.8.8           # Basic connectivity
```
<img width="831" height="166" alt="Screenshot 2025-10-28 at 9 04 01 AM" src="https://github.com/user-attachments/assets/3d7c8ea0-e0d0-4d4b-b404-b374e948b121" />

```
dig redhat.com         # DNS resolution test
```
<img width="846" height="631" alt="Screenshot 2025-10-28 at 9 05 56 AM" src="https://github.com/user-attachments/assets/276e963e-ed1d-4d64-9ddb-ad31956c2836" />

<img width="837" height="341" alt="Screenshot 2025-10-28 at 9 05 35 AM" src="https://github.com/user-attachments/assets/4f73fc82-7fde-4dc8-90af-70d747b7de08" />

```
curl -I example.com    # HTTP service test
```

<img width="995" height="190" alt="Screenshot 2025-10-28 at 9 08 13 AM" src="https://github.com/user-attachments/assets/950ae728-2bd0-4852-9b7d-4f1c59b9d70f" />


**Temporary configuration**
```
ip addr add 192.168.xxx.xxx/xx dev exxxx                 # Add IP
ip link set exxxx up                                     # Enable interface
ip route add default via 192.168.xxx.xx                  # Add gateway
```

Example:

<img width="918" height="569" alt="Screenshot 2025-10-28 at 9 31 30 AM" src="https://github.com/user-attachments/assets/6de30bea-f948-451e-afc2-6f04983588e9" />

---

## 9.4 Network Interface Configuration

### Using `ifconfig` (Legacy)
```bash
ifconfig                 # List interfaces
ifconfig eth0 up         # Bring interface up
ifconfig eth0 down       # Bring interface down
ifconfig eth0 192.168.1.100 netmask 255.255.255.0
```
_Avoid in new automation; present for legacy systems._

### Using `ip` (Preferred)
```bash
ip link set eth0 up
ip addr add 192.168.1.100/24 dev eth0
ip addr del 192.168.1.100/24 dev eth0
ip -br addr                # Brief summary
```
_Persisting changes typically involves distro network config (NetworkManager, systemd-networkd, netplan, etc.), not just `ip` commands._

_Best Practice:_  
Always use `ip` for scripting and automation unless supporting legacy systems.

---

## 9.5 Configuring IP, Gateway, DNS

### Via NetworkManager CLI (`nmcli`)
```bash
nmcli connection show
nmcli connection modify eth0 ipv4.addresses "192.168.1.100/24"
nmcli connection modify eth0 ipv4.gateway "192.168.1.1"
nmcli connection modify eth0 ipv4.dns "8.8.8.8 8.8.4.4"
nmcli connection modify eth0 ipv4.method manual
nmcli connection up eth0
```

### Legacy Static Configuration (Older CentOS / RHEL with network-scripts)
File: `/etc/sysconfig/network-scripts/ifcfg-eth0`
```ini
DEVICE=eth0
BOOTPROTO=static
ONBOOT=yes
IPADDR=192.168.1.100
NETMASK=255.255.255.0
GATEWAY=192.168.1.1
DNS1=8.8.8.8
DNS2=8.8.4.4
```
Restart network service (older systems): `systemctl restart network` or `service network restart`

### NetworkManager Keyfile Example (CentOS Stream 9+)
Path: `/etc/NetworkManager/system-connections/static-enp.nmconnection`
```ini
[connection]
id=static-enp
uuid=45882b4c-314c-11f0-bb1a-5254000dc1ee
type=ethernet
interface-name=enp0s1
autoconnect=true

[ipv4]
method=manual
addresses=192.168.100.199/24;
gateway=192.168.100.1
dns=192.168.100.1

[ipv6]
method=ignore
```
Apply:
```bash
nmcli connection reload
nmcli connection show
nmcli connection up static-enp
ip addr show enp0s1
```

_Best Practice:_  
Store network config in version control for reproducibility. Always reload and verify after changes.

---

## 9.6 DNS Details

View resolvers:
```bash
cat /etc/resolv.conf
```

Common entries:
```
nameserver 8.8.8.8
nameserver 8.8.4.4
```

Note: On systems using `systemd-resolved`, `/etc/resolv.conf` may be a symlink to `run/systemd/...`. Use:
```bash
resolvectl status
```

_Best Practice:_  
Use multiple DNS resolvers for redundancy. Monitor DNS query latency.

---

## 9.7 Routing & Gateway

Show route table:
```bash
ip route show
# Default route example:
# default via 192.168.1.1 dev eth0 proto dhcp metric 100
```

Add default route (temporary):
```bash
ip route add default via 192.168.1.1 dev eth0
```

Delete default route:
```bash
ip route del default
```

_Best Practice:_  
Ensure only one default gateway per host unless multi-homing is intentional.

---

## 9.8 Troubleshooting Matrix

| Symptom | Diagnostic Steps | Possible Cause | Resolution |
|---------|------------------|----------------|------------|
| No connectivity (ping fails) | `ip addr`, `ip link`, `ping gateway` | Interface down | `ip link set <iface> up` |
| DNS fails, IP works | `ping 8.8.8.8` works; `ping example.com` fails | DNS misconfig | Update `/etc/resolv.conf` or NM settings |
| Cannot reach outside subnet | `ip route show` | Missing default route | Add gateway route |
| Slow resolution | `dig +trace example.com` | DNS server latency | Change to faster resolver |
| Port unreachable | `ss -tulnp`, firewall rules | Service not listening / blocked | Start service or adjust firewall |
| Random IP after boot | `ip addr` shows 169.254.x.x | DHCP failure (APIPA) | Check DHCP server / switch cabling |
| Duplicate IP conflict | ARP logs / `arping` | Misconfigured static IP | Assign unique address |

_Best Practice:_  
Log all troubleshooting steps for team review and faster future resolution.

---

## 9.9 Firewall Management

Two major paradigms:
- **firewalld** (dynamic, zones; uses nftables backend on modern systems)
- **iptables** (legacy; now often a compatibility layer)

### firewalld (Preferred)

List current zone & rules:
```bash
firewall-cmd --state
firewall-cmd --get-active-zones
firewall-cmd --list-all
```

Open HTTP (port 80) permanently:
```bash
firewall-cmd --zone=public --add-port=80/tcp --permanent
firewall-cmd --reload
firewall-cmd --list-ports
```

Services concept (predefined):
```bash
firewall-cmd --get-services
firewall-cmd --add-service=https --permanent
firewall-cmd --reload
```

Enable at boot:
```bash
systemctl enable firewalld --now
```

### iptables (Legacy Example)
List rules:
```bash
iptables -L -n -v
```

Allow inbound HTTP:
```bash
iptables -A INPUT -p tcp --dport 80 -j ACCEPT
```

Persist (CentOS/RHEL with iptables-services):
```bash
service iptables save
systemctl enable iptables --now
```

(Modern alternative: migrate to nftables / firewalld.)

_Best Practice:_  
Default deny inbound, only allow required services. Document every rule change.

---

## 9.10 Cloud Networking Basics (AWS, Azure, GCP)

### AWS VPC & Security Groups

**VPC Creation & Subnetting:**
```bash
aws ec2 create-vpc --cidr-block 10.0.0.0/16
aws ec2 create-subnet --vpc-id vpc-1234abcd --cidr-block 10.0.1.0/24
```

**Security Group Rules:**
```bash
aws ec2 describe-security-groups
aws ec2 authorize-security-group-ingress --group-id sg-12345678 --protocol tcp --port 22 --cidr 203.0.113.0/24
aws ec2 revoke-security-group-ingress --group-id sg-12345678 --protocol tcp --port 22 --cidr 0.0.0.0/0
```
_Verification:_  
- Use AWS Console or CLI to confirm rules.

_Best Practice:_  
Restrict security group rules by CIDR. Avoid wide-open (0.0.0.0/0) unless required for testing.

---

### Azure Networking & Network Security Groups (NSG)

**Create NSG Rule:**
```bash
az network nsg rule create \
  --resource-group myResourceGroup \
  --nsg-name myNSG \
  --name AllowSSH \
  --protocol tcp \
  --direction inbound \
  --priority 1000 \
  --source-address-prefixes '203.0.113.0/24' \
  --destination-port-ranges 22 \
  --access Allow
```

**List NSG Rules:**
```bash
az network nsg rule list --resource-group myResourceGroup --nsg-name myNSG
```
_Verification:_  
- Use Azure Portal or CLI to confirm rule status.

_Best Practice:_  
Always set specific source address/range, avoid '*' in production.

---

### GCP VPC & Firewall Rules

**Create Firewall Rule:**
```bash
gcloud compute firewall-rules create allow-ssh \
  --direction=INGRESS \
  --priority=1000 \
  --network=default \
  --action=ALLOW \
  --rules=tcp:22 \
  --source-ranges=203.0.113.0/24
```

**List Firewall Rules:**
```bash
gcloud compute firewall-rules list
```
_Verification:_  
- Use GCP Console or CLI to check rule status.

_Best Practice:_  
Use restrictive source ranges. Audit rules regularly.

---

## 9.11 Container & Kubernetes Networking

### Docker

Expose container port:
```bash
docker run -d -p 8080:8080 myapp
```
_Verification:_
```bash
curl localhost:8080
ss -tulnp | grep 8080
```

### Kubernetes

Simple NetworkPolicy example:
```yaml
apiVersion: networking.k8s.io/v1
kind: NetworkPolicy
metadata:
  name: allow-nginx
spec:
  podSelector:
    matchLabels:
      app: nginx
  ingress:
    - from:
        - ipBlock:
            cidr: 10.0.0.0/24
```
_Verification:_
```bash
kubectl describe networkpolicy allow-nginx
```

_Best Practice:_  
Use least-privilege policies—only allow required ports and traffic between containers/pods.

---

## 9.12 Infrastructure as Code (IaC) for Networking

### Example: Terraform AWS Security Group
```hcl
resource "aws_security_group" "web" {
  name        = "web-sg"
  description = "Allow HTTP and SSH"
  vpc_id      = aws_vpc.main.id

  ingress {
    from_port   = 80
    to_port     = 80
    protocol    = "tcp"
    cidr_blocks = ["0.0.0.0/0"]
  }
  ingress {
    from_port   = 22
    to_port     = 22
    protocol    = "tcp"
    cidr_blocks = ["203.0.113.0/24"]
  }
  egress {
    from_port   = 0
    to_port     = 0
    protocol    = "-1"
    cidr_blocks = ["0.0.0.0/0"]
  }
}
```
_Verification:_
```bash
terraform plan
terraform apply
aws ec2 describe-security-groups
```

### Example: Terraform Azure NSG
```hcl
resource "azurerm_network_security_group" "example" {
  name                = "example-nsg"
  location            = azurerm_resource_group.example.location
  resource_group_name = azurerm_resource_group.example.name

  security_rule {
    name                       = "AllowSSH"
    priority                   = 1000
    direction                  = "Inbound"
    access                     = "Allow"
    protocol                   = "Tcp"
    source_port_range          = "*"
    destination_port_range     = "22"
    source_address_prefix      = "203.0.113.0/24"
    destination_address_prefix = "*"
  }
}
```
_Verification:_
```bash
terraform plan
terraform apply
az network nsg rule list --resource-group <resource-group> --nsg-name example-nsg
```

### Example: Terraform GCP Firewall Rule
```hcl
resource "google_compute_firewall" "allow_ssh" {
  name    = "allow-ssh"
  network = "default"

  allow {
    protocol = "tcp"
    ports    = ["22"]
  }

  source_ranges = ["203.0.113.0/24"]
  direction     = "INGRESS"
  priority      = 1000
}
```
_Verification:_
```bash
terraform plan
terraform apply
gcloud compute firewall-rules list
```

_Best Practice:_  
Store all networking resources in version control and review via PR before deployment.

---

## 9.13 Monitoring & Troubleshooting

### Linux

- **Ping:** `ping 8.8.8.8`
- **Traceroute:** `traceroute example.com`
- **Socket state:** `ss -tulnp`
- **Firewall check:** `firewall-cmd --list-all`
- **System logs:** `journalctl -u NetworkManager`, `dmesg | grep eth`

### Cloud

- **AWS CloudWatch:** Monitor VPC flow logs.
- **Azure Monitor:** NSG flow logs.
- **GCP Logging:** VPC flow logs.

_Best Practice:_  
Aggregate logs and alerts centrally (e.g., ELK, Datadog, Splunk).

---

## 9.14 Security & Best Practices

| Area | Recommendation |
|------|---------------|
| Interface Naming | Use predictable names (`enp0s1`, `eth0`) |
| Automation | IaC (cloud-init, Terraform) for reproducible networking state |
| Firewalls | Default deny inbound; explicitly allow required service ports |
| DNS | Prefer redundant resolvers; monitor query latency |
| IPv6 | Do not disable blindly; secure with proper firewall rules |
| Logging | Log dropped packets (rate-limited) for forensic value |
| Ephemeral Changes | Avoid manual `ip` changes without persisting if required across reboots |
| NAT Awareness | Document translation points for troubleshooting |
| Cloud Security | Restrict CIDR, use tags/labels for resource grouping |
| Container Networking | Apply least-privilege network policies |
| Change Management | Always document and peer-review changes |

---

## 9.15 Cheat Sheet

```bash
# Show brief interface summary
ip -br a

# Assign temporary IPv4
ip addr add 10.10.5.25/24 dev eth0

# Remove that address
ip addr del 10.10.5.25/24 dev eth0

# Show default route
ip route | grep default

# Set DNS (NetworkManager)
nmcli connection modify eth0 ipv4.dns "1.1.1.1 8.8.8.8"

# Test outward path
traceroute 8.8.8.8

# Inspect open listening TCP ports
ss -tlnp

# HTTP header retrieval
curl -I https://example.com

# Quick DNS A record lookup
dig +short example.com

# Show firewall active ports (firewalld)
firewall-cmd --list-ports

# AWS SG rules
aws ec2 describe-security-groups

# Azure NSG rules
az network nsg rule list --resource-group myResourceGroup --nsg-name myNSG

# GCP firewall rules
gcloud compute firewall-rules list
```

---

## 9.16 Example Scenario: Static Configuration & Verification

1. Discover interface name:
   ```bash
   ip -br link
   ```
2. Assign static IP via NetworkManager:
   ```bash
   nmcli connection modify eth0 ipv4.addresses "192.168.50.10/24"
   nmcli connection modify eth0 ipv4.gateway "192.168.50.1"
   nmcli connection modify eth0 ipv4.dns "192.168.50.1 1.1.1.1"
   nmcli connection modify eth0 ipv4.method manual
   nmcli connection up eth0
   ```
3. Validate:
   ```bash
   ip addr show eth0
   ip route show
   ping -c 3 192.168.50.1
   dig +short example.com
   curl -I https://example.com
   ```

---

## 9.17 Cleanup & Reversion

If you added a temporary IP:
```bash
ip addr del 192.168.1.100/24 dev eth0
```

If you opened a firewall port (firewalld) for testing:
```bash
firewall-cmd --zone=public --remove-port=8080/tcp --permanent
firewall-cmd --reload
```

If you modified a NetworkManager connection incorrectly:
```bash
nmcli connection reload
nmcli connection modify eth0 ipv4.method auto
nmcli connection up eth0
```

---

## 9.18 Legacy vs Modern Summary

| Function | Legacy Tool(s) | Modern Preferred |
|----------|----------------|------------------|
| Interface management | `ifconfig` | `ip addr`, `ip link` |
| Routes | `route` | `ip route` |
| Sockets | `netstat` | `ss` |
| Firewall | `iptables` | `firewalld` (nftables) |
| DNS Query | `nslookup` | `dig`, `getent hosts` |

---

## 9.19 References (Suggested Further Study)

- RFC 1918 – Address Allocation for Private Internets
- RFC 5735 / 6890 – Special Use IPv4 Addresses
- `man ip`, `man nmcli`, `man firewalld.richlanguage`
- Linux Advanced Routing & Traffic Control HOWTO
- [AWS VPC Documentation](https://docs.aws.amazon.com/vpc/latest/userguide/)
- [Azure VNet Documentation](https://docs.microsoft.com/en-us/azure/virtual-network/)
- [GCP VPC Documentation](https://cloud.google.com/vpc/docs)
- [Docker Networking](https://docs.docker.com/network/)
- [Kubernetes Networking](https://kubernetes.io/docs/concepts/cluster-administration/networking/)
- [Terraform Networking](https://developer.hashicorp.com/terraform/tutorials/aws/aws-networking)
---

_Best Practice:_  
Continuously review, document, and automate your networking configurations for reliability, security, and scalability. Always verify after changes and monitor for early detection of issues.

---
