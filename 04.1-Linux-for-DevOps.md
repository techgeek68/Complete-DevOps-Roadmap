# 3. Linux for DevOps

## 1. Basic Linux Commands

Linux commands are fundamental tools for DevOps engineers, allowing you to interact with the system, manage files, users, and system resources. Below is an organized guide with explanations and examples to clarify key concepts.

---

### **Core Linux Commands**

- **File/Directory Operations:**  
  - `ls`: List files and directories  
  - `cd`: Change directory  
  - `cp`: Copy files/directories  
  - `mv`: Move/rename files/directories  
  - `rm`: Remove files/directories  
  - `find`: Search for files/directories  

- **Session Basics:**  
  - Power on and log in using your credentials.  
  - `$` → Normal user’s login prompt  
  - `#` → Root user’s login prompt  
  - `~` → Home directory (current user's home folder)  

- **User and Host Info:**  
  - `whoami`: Display the current logged-in user  
  - `hostname`: Show system hostname  
  - `clear`: Clear the terminal screen  
  - `#`: Comment symbol in scripts  

#### **Examples**

```
hostname
```
```
whoami
```
```
clear
```
```
ls
```
```
pwd
```
```
cd /var/log
```

---

### **Changing the Hostname**

- **Syntax:** `hostnamectl set-hostname <hostname>`

- **Example:**

```
sudo hostnamectl set-hostname your_name_server.com.np
```
```
exec bash
```
```
hostname
```

---

### **Switching between Graphical and Non-Graphical Terminals**

- For systems with GUI:
  - `ALT+CTRL+F1` → Switch to GUI (Graphical)
  - `ALT+CTRL+[F2-F6]` → Switch to non-GUI (Terminal)

---

### **User Management**

- **Create a User:**  
  - Syntax: `sudo useradd <username>`

  - Examples:
    ```
    sudo useradd phpdev
    ```
    ```
    sudo useradd javadev
    ```

- **Set Password for User:**  
  - Syntax: `sudo passwd <username>`

  - Examples:
    ```
    sudo passwd phpdev
    ```
    ```
    sudo passwd javadev
    ```

- **Password Recommendations:**  
  - Use complex passwords (9-12+ characters)
  - Include uppercase, lowercase, numbers, special characters
  - Avoid dictionary words and usernames in the password
  - Set password expiry policies

---

- **Switch User Account:**  
  - Syntax: `su – <username>`

  - Example:
    ```
    su – phpdev
    ```
    ```
    whoami
    ```
    ```
    su – javadev
    ```
    ```
    whoami
    ```
    ```
    exit
    ```

---

- **Changing Another User's Password (as root or with sudo):**
  - Syntax: `passwd <username>`
    
  - Example:
    ```
    sudo passwd phpdev
    # new password: *********
    # confirm: ********
    ```

- **Change Own Password:**  
  - Syntax: `passwd`

  - Example:
    ```
    passwd
    # current password: *********
    # new password: *********
    # confirm: ********
    ```

---

### **File Operations**

- **Create/Edit a File:**  
  - Syntax: `vi <filename>`

  - Example:
    ```
    vi devopsfile
    ```
    *(Press 'i' to insert text. Press 'ESC', then ':wq' to save and exit)*

- **List Files/Directories:**  
  ```
  ls
  ```

- **View File Content:**

  - `cat`: Concatenate and display file content  
    - Common options:  
      - `-n`: Number all lines  
      - `-b`: Number only non-blank lines  
      - `-s`: Squeeze multiple blank lines

    - Examples:
      ```
      cat /etc/passwd
      ```
      ```
      cat -n file.txt
      ```
      ```
      cat -b file.txt
      ```

  - `tac`: Display file content in reverse
    ```
    tac /etc/passwd
    ```

  - `more`: Page-by-page file viewer (forward only)
    ```
    more /etc/passwd
    ```

  - `less`: Scrollable file viewer (forward/backward)
    ```
    less /etc/passwd
    ```
    ```
    less -N /etc/passwd
    ```

  - `head`: Show first N lines
    ```
    head /etc/passwd
    ```
    ```
    head -n 5 file.txt
    ```

  - `tail`: Show last N lines or follow file in real-time
    ```
    tail /etc/passwd
    ```
    ```
    tail -n 20 /etc/passwd
    ```
    ```
    tail -f /etc/passwd                                          #It's useful for watching log files in real time.
    ```

---

- **View Current Working Directory:**  
  ```
  pwd
  ```
  *(Example output: /home/user_name)*

---

- **Create and change Directory:**  
  - Syntax: `mkdir <dir_name> ...`

  - Example:
    ```
    mkdir devops
    ```
    ```
    mkdir dir1 dir2 dir3
    ```
    ```
    pwd
    ```
    ```
    cd dir1
    ```
    ```
    pwd
    ```
    ```
    cd                                                            #Back to the home directory.
    ```

- **Create Tree Structure of Directories:**
  ```
  mkdir -p SoftTech/{Administration,Developer,Operation}
  ```
  ```
  tree SoftTech
  ```
  ```
  mkdir -p SoftTech/{Administration,Developer/{Jr.Dev,Sr.Dev},Operation}
  ```
  ```
  tree SoftTech
  ```

---

#### **Path Specifications**

- **Absolute Path:**  
  ```
  cd ~/SoftTech/Developer/Jr.Dev
  ```
  ```
  pwd
  ```

- **Relative Path:**  
  ```
  vi ../../Operation/operationfile
  ```
  ```
  This is the operation department's file.
  ```
  ```
  cd
  ```
  ```
  tree SoftTech
  ```

---

### **Hidden Files/Directories**

- **Create Hidden Directory/File:**

Examples:
  ```
  mkdir .hiddendir
  ```
  ```
  vi .hiddenfile
  ```
  ```
  ls
  ```
  ```
  ls -a
  ```

---

### **Files/Directories with Special Characters**

- **Create Files/Dirs with Spaces/Special Characters:**

Examples:
  ```
  vi "hidden file"
  ```
  ```
  mkdir "my new @dir"
  ```
  ```
  mkdir my\ new
  ```
  ```
  ls
  ```

---

### **Create Empty File**

Syntax: `touch <file_name>`

Example:
```
touch emptyfile
```

---

### **Rename File/Directory**

Syntax: `mv <old_name> <new_name>`

Example:
```
mv emptyfile file1
```

---

### **Move File/Directory**

Syntax: `mv <source> <destination>`

Examples:
```
mv file1 'my new @dir'
```
```
ls 'my new @dir'
```

```
mv ~/my\ new\ \@dir/file1 ~/SoftTech/Developer
```
```
tree SoftTech
```

- **Note:** Use `-i` to avoid overwriting.

---

### **Copy File/Directory**

Syntax: `cp <source> <destination>`

- To copy directories, use `-r`.

```
  cp -r my\ new\ @dir SoftTech
```
```
tree SoftTech
```

```
touch copyfile
```
```
mkdir copyexample
```
```
cp copyfile copyexample
```
```
ls
```
```
ls copyexample
```

---

### **Remove File/Directory**

```
rm copyfile
```
```
rm -r copyexample
```

---

### **Search Within Files: `grep`**

Examples:
```
grep phpdev /etc/passwd
```
```
cat /etc/passwd | grep javadev
```

---

### **Pipelining Commands**

Pipelining connects commands so the output of one becomes the input of the next.

Example:
```
vi mixfile
```
```
This is the first line.
This is the second line.
This is the third line.
This is the fourth line.
This is the fifth line.
This is the sixth line.
```
```
cat mixfile | grep is
```
```
cat mixfile | grep fi
```
```
cat mixfile | grep is | wc -l
```

---

### **Compressing Files**

- **gzip:** Compresses files to .gz format.  
  - To keep original file: `gzip -k <file>`

```
cp /usr/share/dict/words  .
```
```
cat words
```
```
gzip -v words
```
```
gunzip -v words
```

```
gzip -vk words
```


**Compressing tools table**

| Tool      | Compress (delete original) | Compress (keep original) | Decompress              |
|-----------|---------------------------|--------------------------|-------------------------|
| gzip      | `gzip words`              | `gzip -k words`          | `gunzip words.gz`       |
| bzip2     | `bzip2 words`             | `bzip2 -k words`         | `bunzip2 words.bz2`     |
| xz        | `xz words`                | `xz -k words`            | `unxz words.xz`         |
| zip       | `zip words.zip words`     | N/A (zip doesn’t delete) | `unzip words.zip`       |
| tar+gzip  | `tar -czvf words.tar.gz words` | N/A                  | `tar -xzvf words.tar.gz`|
| tar+bzip2 | `tar -cjvf words.tar.bz2 words` | N/A                 | `tar -xjvf words.tar.bz2`|
| tar+xz    | `tar -cJvf words.tar.xz words` | N/A                  | `tar -xJvf words.tar.xz`|

**Note:**  
- Use `-v` for verbose output.
- Use `-k` to keep the original file (where supported).
- `tar` is used to package multiple files/directories before compressing.
---

### **Archiving Files with `tar`**

Archiving combines multiple files into one file, optionally with compression.

Syntax:
- **Create an archive (no compression):**
  ```bash
  tar -cvf archive_name.tar file1 file2 dir1
  ```

- **Create a compressed archive (gzip):**
  ```bash
  tar -czvf archive_name.tar.gz file1 dir1
  ```

**Options and meaning**:

| Option | Meaning                                               |
|--------|-------------------------------------------------------|
| `-c`   | **Create** a new archive                              |
| `-x`   | **Extract** files from an archive                     |
| `-v`   | **Verbose** output; lists files processed             |
| `-f`   | **File** name of the archive to create or extract     |
| `-z`   | **Compress** archive using gzip (for `.tar.gz` files) |
| `-j`   |	Compress archive using bzip2 (for .tar.bz2 files)    |
| `-t`   | **List** contents of the archive                      |


Examples:

- **Create sample files:**
  ```bash
  touch sourcefile{1..20}
  ```

- **Archive multiple files:**
  ```bash
  tar -cvf source_archive.tar source*
  ```

- **Create a compressed archive:**
  ```bash
  tar -czvf compress_archive.tar.gz source*
  ```

- **List contents of an archive:**
  ```bash
  tar -tvf source_archive.tar
  ```

- **List contents of a compressed archive:**
  ```bash
  tar -tzvf compress_archive.tar.gz
  ```

- **Extract files from an archive:**
  ```bash
  tar -xvf source_archive.tar
  ```

- **Extract files from a compressed archive:**
  ```bash
  tar -xzvf compress_archive.tar.gz
  ```

---

### **System Information Commands**

```bash
uname -a
#Shows detailed system and kernel information.
```

```bash
free -h
#Shows available and used memory (RAM and swap) in a human-readable format.
```

```bash
lscpu
#Displays detailed information about the CPU architecture and specifications.
```

```bash
df -h
#Reports disk space usage for all mounted file systems in a human-readable format.
```

```bash
who
#Lists users currently logged into the system.
```

```bash
top
#Displays real-time system processes and resource usage.
```

```bash
htop
#An enhanced version of 'top' with a user-friendly interface (if installed).
```

```bash
vmstat
#Reports information about processes, memory, paging, block IO, and CPU activity.
```

```bash
uptime
#Tells how long the system has been running and the system load averages.
```

```bash
hostname
#Prints the name of the current host (computer).
```

```bash
cat /proc/meminfo
#Displays detailed information about system memory.
```

```bash
cat /proc/cpuinfo
#Displays detailed information about the CPU(s).
```

```bash
lsblk
#Lists information about all available or the specified block devices.
```

```bash
id
#Shows user and group information for the current user.
```

<img width="1277" height="424" alt="Screenshot 2025-10-16 at 10 34 43 AM" src="https://github.com/user-attachments/assets/a5f43508-a78d-47ae-a14f-26777ed1c1b5" />


---

### **Linux Filesystem Hierarchy**

- /: Root directory. The top of the directory tree.
- /boot: Boot loader files, Linux kernel, initialization files needed for booting.
- /dev: Device files representing hardware devices (disks, terminals, printers, etc.).
- /etc: System-wide configuration files and shell scripts used to boot and configure system settings.
- /home: User home directories. Each user gets a personal directory (e.g., /home/techgeek68).
- /lib: Essential shared libraries and kernel modules for the binaries in /bin and /sbin.
- /media: Mount point for removable media (CD-ROMs, USB drives, etc.).
- /mnt: Temporary mount point for filesystems (often used for manual mounts).
- /opt: Optional, third-party or add-on application packages.
- /proc: Virtual filesystem providing process and kernel information as files.
- /root: Home directory for the root (administrator) user.
- /run: Runtime data for processes started since last boot; system information.
- /sbin: System binaries for administration, system maintenance (meant for root user).
- /srv: Data for services provided by the system (e.g., web, FTP).
- /sys: Virtual filesystem, exposes kernel and hardware info.
- /tmp: Temporary files, cleared on reboot.
- /usr: User utilities & applications (read-only after installation)
- /usr/bin: Non-admin user commands.
- /usr/sbin: Admin commands for system management.
- /usr/lib: Libraries for /usr/bin and /usr/sbin.
- /usr/local: Locally installed software and scripts (not managed by distribution package manager).
- /usr/share: Architecture-independent shared data (docs, icons, etc.).
- /var: Variable files, logs, mail spools, print queues, caches
- /var/log: Log files
- /var/mail: Mailboxes
- /var/spool: Task spools (print jobs, mail, etc.)
- /var/tmp: Temporary files preserved between reboots

---

## 2. Getting Help in Linux

Linux provides several built-in tools to help you understand commands and troubleshoot problems.

**a. `man` (Manual Pages)**

- Shows detailed documentation for commands.
- Syntax: `man <command>`
- Navigation:
  - **Arrow keys / Page Up / Page Down** — Move through the content
  - `Space` — Scroll down one page
  - `b` — Scroll up one page
  - `/text`: Search for text
    - `n`: Next occurrence
    - `N`: Previous occurrence
  - `q`: Quit the man viewer.

**Example:**

```
man ls
```

---

**b. `--help` Option**

- Quick overview of command usage and options.
- Syntax: `<command> --help`

**Examples:**

```
cp --help
```
```
ls --help | grep sort
```

---

**c. `info` (GNU Info Pages)**

- Detailed, node-based help for GNU commands.
- Sometimes more comprehensive than man pages.
- Syntax: `info <command>`
- Navigating:
  - **Arrow keys / Page Up / Page Down**: Move up and down through the content.
  - **Space**: Scroll down one page.
  - **Backspace**: Scroll up one page.
  - **Enter**: Follow the selected menu link or reference.
  - **n**: Go to the next node (section).
  - **p**: Go to the previous node.
  - **u**: Move up one node (to the parent section).
  - **l**: Return to the last node visited.
  - **m**: Jump to a menu item (type its name, then Enter).
  - **d**: Go to the directory node (main index).
  - **s**: Search for a menu item by name.
  - **/text**: Search for text within the current node.
    - **n**: Next occurrence of the search term.
    - **N**: Previous occurrence of the search term.
  - **q**: Quit the info viewer.

**Examples:**

```
info ls
```
```
info mv
```

---

### **Searching for Commands**


a. `apropos`

- Searches for commands related to a keyword or description.

```bash
apropos copy
# Lists all commands and descriptions related to "copy".
```

b. `whatis`

- Shows a brief, one-line description of a command.

```bash
whatis tar
# Displays a summary of what the 'tar' command does.
```

c. `type`

- Tells how a command is interpreted (binary, alias, shell builtin, function).

```bash
type ls
# Shows how 'ls' is resolved by the shell.
```

d. `which`

- Shows the full path of the executable for a command.

```bash
which python
# Displays where 'python' is located in your PATH.
```

e. `whereis`

- Finds the location of the binary, source, and man pages for a command.

```bash
whereis ls
# Shows where 'ls' and its related files are found.
```

---

### **Why These Skills Matter in DevOps**

DevOps engineers regularly automate tasks, troubleshoot problems, and manage servers. Mastering Linux commands enhances efficiency, facilitates scripting and automation (using Bash, Python, etc.), and enables you to quickly resolve issues in complex environments.

**Examples: Automating and Managing with Linux Commands**

**Find and Count Users with `/bin/bash` Shell**

```bash
cat /etc/passwd | grep '/bin/bash' | wc -l > bash_user_count
#Counts users with /bin/bash as their shell and saves the result.
```

**Monitor Logs in Real-Time**
```bash
journalctl -f
# Monitors systemd journal logs in real-time.
```
```bash
sudo dmesg -w
# Shows kernel ring buffer messages live.
```

**Archive and Compress a Web Directory**

```bash
tar -czvf website_backup.tar.gz /var/www/html
# Archives and compresses the website directory.
```
```bash
zip -r website_backup.zip /var/www/html
# Archives and compresses using zip format.
```

**Find Large Files in a Directory**

```bash
find /var/www/html -type f -size +100M
# Lists all files larger than 100MB in the web directory.
```

**Check Disk Usage**

```bash
du -sh /var/www/html
# Shows the total size of the web directory.
```
```bash
df -h
# Displays disk space usage for all mounted filesystems.
```

**Search for a String in Log Files**

```bash
grep "error" /var/log/syslog
# Finds lines containing "error" in the syslog.
```
```bash
grep -r "404" /var/www/html/
# Recursively finds "404" in all files under /var/www/html/.
```

**View Running Processes**

```bash
ps aux
# Lists all running processes.
```
```bash
top
# Interactive real-time view of processes and resource usage.
```
```bash
htop
# Enhanced, interactive process viewer (if installed).
```

**Check Network Connections**
```bash
netstat -tuln
# Lists all active listening ports and connections.
```

```bash
ss -tuln
# Modern replacement for netstat; shows active connections.
```

---
