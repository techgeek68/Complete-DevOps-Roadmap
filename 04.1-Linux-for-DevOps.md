# 3. Linux for DevOps

## 1. Basic Linux Commands

Linux commands are fundamental tools for DevOps engineers, allowing you to interact with the system, manage files, users, and system resources. Below is an organized guide with explanations and examples to clarify key concepts.

---

### **Core Linux Commands**

- **File/Directory Operations:**  
  - `ls` : List files and directories  
  - `cd` : Change directory  
  - `cp` : Copy files/directories  
  - `mv` : Move/rename files/directories  
  - `rm` : Remove files/directories  
  - `find` : Search for files/directories  

- **Session Basics:**  
  - Power on and login using your credentials.  
  - `$` → Normal user’s login prompt  
  - `#` → Root user’s login prompt  
  - `~` → Home directory (current user's home folder)  

- **User and Host Info:**  
  - `whoami` : Display the current logged-in user  
  - `hostname` : Show system hostname  
  - `clear` : Clear the terminal screen  
  - `#` : Comment symbol in scripts  

#### **Examples**

```
hostname
```
```
whoami
```
```
clear
```
```
ls
```
```
pwd
```
```
cd /var/log
```

---

### **Changing the Hostname**

- **Syntax:** `hostnamectl set-hostname <hostname>`

- **Example:**

```
sudo hostnamectl set-hostname your_name_server.com.np
```
```
exec bash
```
```
hostname
```

---

### **Switching between Graphical and Non-Graphical Terminals**

- For systems with GUI:
  - `ALT+CTRL+F1` → Switch to GUI (Graphical)
  - `ALT+CTRL+[F2-F6]` → Switch to non-GUI (Terminal)

---

### **User Management**

- **Create a User:**  
  - Syntax: `sudo useradd <username>`

  - Examples:
    ```
    sudo useradd phpdev
    ```
    ```
    sudo useradd javadev
    ```

- **Set Password for User:**  
  - Syntax: `sudo passwd <username>`

  - Examples:
    ```
    sudo passwd phpdev
    ```
    ```
    sudo passwd javadev
    ```

- **Password Recommendations:**  
  - Use complex passwords (9-12+ characters)
  - Include uppercase, lowercase, numbers, special characters
  - Avoid dictionary words and usernames in the password
  - Set password expiry policies

---

- **Switch User Account:**  
  - Syntax: `su – <username>`

  - Example:
    ```
    su – phpdev
    ```
    ```
    whoami
    ```
    ```
    su – javadev
    ```
    ```
    whoami
    ```
    ```
    exit
    ```

---

- **Changing Another User's Password (as root or with sudo):**
  - Syntax: `passwd <username>`
    
  - Example:
    ```
    sudo passwd phpdev
    # new password: *********
    # confirm: ********
    ```

- **Change Own Password:**  
  - Syntax: `passwd`

  - Example:
    ```
    passwd
    # current password: *********
    # new password: *********
    # confirm: ********
    ```

---

### **File Operations**

- **Create/Edit a File:**  
  - Syntax: `vi <filename>`

  - Example:
    ```
    vi devopsfile
    ```
    *(Press 'i' to insert text. Press 'ESC', then ':wq' to save and exit)*

- **List Files/Directories:**  
  ```
  ls
  ```

- **View File Content:**

  - `cat`: Concatenate and display file content  
    - Common options:  
      - `-n`: Number all lines  
      - `-b`: Number only non-blank lines  
      - `-s`: Squeeze multiple blank lines

    - Examples:
      ```
      cat /etc/passwd
      ```
      ```
      cat -n file.txt
      ```
      ```
      cat -b file.txt
      ```

  - `tac`: Display file content in reverse
    ```
    tac /etc/passwd
    ```

  - `more`: Page-by-page file viewer (forward only)
    ```
    more /etc/passwd
    ```

  - `less`: Scrollable file viewer (forward/backward)
    ```
    less /etc/passwd
    ```
    ```
    less -N /etc/passwd
    ```

  - `head`: Show first N lines
    ```
    head /etc/passwd
    ```
    ```
    head -n 5 file.txt
    ```

  - `tail`: Show last N lines or follow file in real-time
    ```
    tail /etc/passwd
    ```
    ```
    tail -n 20 /etc/passwd
    ```
    ```
    tail -f /etc/passwd                                          #It's useful for watching log files in real time.
    ```

---

- **View Current Working Directory:**  
  ```
  pwd
  ```
  *(Example output: /home/user_name)*

---

- **Create and change Directory:**  
  - Syntax: `mkdir <dir_name> ...`

  - Example:
    ```
    mkdir devops
    ```
    ```
    mkdir dir1 dir2 dir3
    ```
    ```
    pwd
    ```
    ```
    cd dir1
    ```
    ```
    pwd
    ```
    ```
    cd                                                            #Back to the home directory.
    ```

- **Create Tree Structure of Directories:**
  ```
  mkdir -p SoftTech/{Administration,Developer,Operation}
  ```
  ```
  tree SoftTech
  ```
  ```
  mkdir -p SoftTech/{Administration,Developer/{Jr.Dev,Sr.Dev},Operation}
  ```
  ```
  tree SoftTech
  ```

---

#### **Path Specifications**

- **Absolute Path:**  
  ```
  cd ~/SoftTech/Developer/Jr.Dev
  ```
  ```
  pwd
  ```

- **Relative Path:**  
  ```
  vi ../../Operation/operationfile
  ```
  ```
  This is the operation department's file.
  ```
  ```
  cd
  ```
  ```
  tree SoftTech
  ```

---

### **Hidden Files/Directories**

- **Create Hidden Directory/File:**

Examples:
  ```
  mkdir .hiddendir
  ```
  ```
  vi .hiddenfile
  ```
  ```
  ls
  ```
  ```
  ls -a
  ```

---

### **Files/Directories with Special Characters**

- **Create Files/Dirs with Spaces/Special Characters:**

Examples:
  ```
  vi "hidden file"
  ```
  ```
  mkdir "my new @dir"
  ```
  ```
  mkdir my\ new
  ```
  ```
  ls
  ```

---

### **Create Empty File**

Syntax: `touch <file_name>`

Example:
```
touch emptyfile
```

---

### **Rename File/Directory**

Syntax: `mv <old_name> <new_name>`

Example:
```
mv emptyfile file1
```

---

### **Move File/Directory**

Syntax: `mv <source> <destination>`

Examples:
```
mv file1 'my new @dir'
```
```
ls 'my new @dir'
```

```
mv ~/my\ new\ \@dir/file1 ~/SoftTech/Developer
```
```
tree SoftTech
```

- **Note:** Use `-i` to avoid overwriting.

---

### **Copy File/Directory**

Syntax: `cp <source> <destination>`

- To copy directories, use `-r`.

```
  cp -r my\ new\ @dir SoftTech
```
```
tree SoftTech
```

```
touch copyfile
```
```
mkdir copyexample
```
```
cp copyfile copyexample
```
```
ls
```
```
ls copyexample
```

---

### **Remove File/Directory**

```
rm copyfile
```
```
rm -r copyexample
```

---

### **Search Within Files: `grep`**

Examples:
```
grep phpdev /etc/passwd
```
```
cat /etc/passwd | grep javadev
```

---

### **Pipelining Commands**

Pipelining connects commands so the output of one becomes the input of the next.

Example:
```
vi mixfile
```
```
This is the first line.
This is the second line.
This is the third line.
This is the fourth line.
This is the fifth line.
This is the sixth line.
```
```
cat mixfile | grep is
```
```
cat mixfile | grep fi
```
```
cat mixfile | grep is | wc -l
```

---

### **Compressing Files**

- **gzip:** Compresses files to .gz format.  
  - To keep original file: `gzip -k <file>`

```
cp /usr/share/dict/words .
```
```
gzip -v words
```
```
gunzip -v words
```
```
gzip -vk words
```

---

### **Archiving Files with `tar`**

Archiving combines multiple files into one (optionally compressed).

```
tar -cvf archive_name.tar file1 file2 folder1
```
```
tar -czvf archive_name.tar.gz file1 file2
```
```
touch source{1..20}
```
```
tar -cvf source_archive.tar source*
```
```
tar -czvf compress_archive.tar.gz source*
```
```
tar -tvf source_archive.tar
```
```
tar -tzvf compress_archive.tar.gz
```
```
tar -xvf source_archive.tar
```
```
tar -xzvf compress_archive.tar.gz
```

---

### **System Information Commands**

```
free -h
```
```
lscpu
```
```
df -h
```
```
who
```

---

### **Linux Filesystem Hierarchy**

- /: Root directory. The top of the directory tree.
- /boot: Boot loader files, Linux kernel, initialization files needed for booting.
- /dev: Device files representing hardware devices (disks, terminals, printers, etc.).
- /etc: System-wide configuration files and shell scripts used to boot and configure system settings.
- /home: User home directories. Each user gets a personal directory (e.g., /home/techgeek68).
- /lib: Essential shared libraries and kernel modules for the binaries in /bin and /sbin.
- /media: Mount point for removable media (CD-ROMs, USB drives, etc.).
- /mnt: Temporary mount point for filesystems (often used for manual mounts).
- /opt: Optional, third-party or add-on application packages.
- /proc: Virtual filesystem providing process and kernel information as files.
- /root: Home directory for the root (administrator) user.
- /run: Runtime data for processes started since last boot; system information.
- /sbin: System binaries for administration, system maintenance (meant for root user).
- /srv: Data for services provided by the system (e.g., web, FTP).
- /sys: Virtual filesystem, exposes kernel and hardware info.
- /tmp: Temporary files, cleared on reboot.
- /usr: User utilities & applications (read-only after installation)
- /usr/bin: Non-admin user commands.
- /usr/sbin: Admin commands for system management.
- /usr/lib: Libraries for /usr/bin and /usr/sbin.
- /usr/local: Locally installed software and scripts (not managed by distribution package manager).
- /usr/share: Architecture-independent shared data (docs, icons, etc.).
- /var: Variable files, logs, mail spools, print queues, caches
- /var/log: Log files
- /var/mail: Mailboxes
- /var/spool: Task spools (print jobs, mail, etc.)
- /var/tmp: Temporary files preserved between reboots

---

## 2. Getting Help in Linux

Linux provides several built-in tools to help you understand commands and troubleshoot problems.

### **Main Help Methods**

#### a. `man` (Manual Pages)

- Shows detailed documentation for commands.
- Syntax: `man <command>`
- Navigation:
  - `/text` : Search for text
  - `n` : Next occurrence
  - `N` : Previous occurrence
  - `q` : Quit

**Example:**

```
man ls
```

---

#### b. `--help` Option

- Quick overview of command usage and options.
- Syntax: `<command> --help`

**Examples:**

```
cp --help
```
```
ls --help | grep sort
```

---

#### c. `info` (GNU Info Pages)

- Detailed, node-based help for GNU commands.
- Sometimes more comprehensive than man pages.
- Syntax: `info <command>`

**Example:**

```
info ls
```

---

### **Searching for Commands**

#### a. `apropos`

- Searches for commands related to a keyword.

```
apropos copy
```

---

#### b. `whatis`

- One-line description of a command.

```
whatis tar
```

---

### **Summary Table**

| Command   | Description                           | Example           |
|-----------|---------------------------------------|-------------------|
| man       | Opens full manual documentation       | man grep          |
| --help    | Shows a quick usage guide             | mkdir --help      |
| info      | Provides detailed GNU help            | info mv           |
| apropos   | Searches by keyword in man pages      | apropos file      |
| whatis    | One-line description of a command     | whatis echo       |

---


### **Why These Skills Matter in DevOps**

DevOps engineers regularly automate tasks, troubleshoot problems, and manage servers. Mastering Linux commands enhances efficiency, facilitates scripting and automation (using Bash, Python, etc.), and enables you to quickly resolve issues in complex environments.

### **Example: Automating a Task with Pipelining**

Suppose you want to find all users with `/bin/bash` as their shell, count them, and save the result:

```
cat /etc/passwd | grep '/bin/bash' | wc -l > bash_user_count.txt
```

### **Example: Monitor Logs in Real-Time**

```
tail -f /var/log/syslog
```

### **Example: Archive and Compress a Web Directory**

```
tar -czvf website_backup.tar.gz /var/www/html
```

---

**Note**: For beginners, experiment with these commands in a test environment before running them on a production server. Use `man` and `--help` often to build confidence and discover new options!
